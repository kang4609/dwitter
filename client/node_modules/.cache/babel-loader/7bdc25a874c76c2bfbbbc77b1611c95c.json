{"ast":null,"code":"export default class AuthService {\n  constructor(http, tokenStorage) {\n    this.http = http;\n    this.tokenStorage = tokenStorage;\n  }\n\n  async login(username, password) {\n    console.log(`username=${username}`);\n    const data = await this.http.fetch('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        //\n        password\n      })\n    });\n    this.tokenStorage.saveToken(data.token);\n    return data;\n  }\n\n  async signup(username, password, name, email, url) {\n    const data = await this.http.fetch('/auth/signup', {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        //\n        password,\n        name,\n        email,\n        url\n      })\n    });\n    this.tokenStorage.saveToken(data.token);\n    return data;\n  }\n\n  async me() {\n    const token = this.tokenStorage.getToken();\n    return this.http.fetch('/auth/me', {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n  }\n\n  async logout() {\n    this.tokenStorage.clearToken();\n  }\n\n}","map":{"version":3,"sources":["/Users/yeoungseurkang/projects/node/dwitter/client/src/service/auth.js"],"names":["AuthService","constructor","http","tokenStorage","login","username","password","console","log","data","fetch","method","body","JSON","stringify","saveToken","token","signup","name","email","url","me","getToken","headers","Authorization","logout","clearToken"],"mappings":"AAAA,eAAe,MAAMA,WAAN,CAAkB;AAC7BC,EAAAA,WAAW,CAACC,IAAD,EAAOC,YAAP,EAAqB;AAC5B,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKC,YAAL,GAAoBA,YAApB;AACH;;AAEU,QAALC,KAAK,CAACC,QAAD,EAAWC,QAAX,EAAqB;AAC5BC,IAAAA,OAAO,CAACC,GAAR,CAAa,YAAWH,QAAS,EAAjC;AACA,UAAMI,IAAI,GAAG,MAAM,KAAKP,IAAL,CAAUQ,KAAV,CAAgB,aAAhB,EAA+B;AAC9CC,MAAAA,MAAM,EAAE,MADsC;AAE9CC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBT,QAAAA,QADiB;AACP;AACVC,QAAAA;AAFiB,OAAf;AAFwC,KAA/B,CAAnB;AAQA,SAAKH,YAAL,CAAkBY,SAAlB,CAA4BN,IAAI,CAACO,KAAjC;AACA,WAAOP,IAAP;AACH;;AACW,QAANQ,MAAM,CAACZ,QAAD,EAAWC,QAAX,EAAqBY,IAArB,EAA2BC,KAA3B,EAAkCC,GAAlC,EAAuC;AAC/C,UAAMX,IAAI,GAAG,MAAM,KAAKP,IAAL,CAAUQ,KAAV,CAAgB,cAAhB,EAAgC;AAC/CC,MAAAA,MAAM,EAAE,MADuC;AAE/CC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBT,QAAAA,QADiB;AACP;AACVC,QAAAA,QAFiB;AAGjBY,QAAAA,IAHiB;AAIjBC,QAAAA,KAJiB;AAKjBC,QAAAA;AALiB,OAAf;AAFyC,KAAhC,CAAnB;AAWA,SAAKjB,YAAL,CAAkBY,SAAlB,CAA4BN,IAAI,CAACO,KAAjC;AACA,WAAOP,IAAP;AACH;;AACO,QAAFY,EAAE,GAAG;AACP,UAAML,KAAK,GAAG,KAAKb,YAAL,CAAkBmB,QAAlB,EAAd;AAEA,WAAO,KAAKpB,IAAL,CAAUQ,KAAV,CAAgB,UAAhB,EAA4B;AAC/BC,MAAAA,MAAM,EAAE,KADuB;AAE/BY,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAG,UAASR,KAAM;AAAjC;AAFsB,KAA5B,CAAP;AAIH;;AAEW,QAANS,MAAM,GAAG;AACX,SAAKtB,YAAL,CAAkBuB,UAAlB;AACH;;AA7C4B","sourcesContent":["export default class AuthService {\n    constructor(http, tokenStorage) {\n        this.http = http;\n        this.tokenStorage = tokenStorage;\n    }\n\n    async login(username, password) {\n        console.log(`username=${username}`);\n        const data = await this.http.fetch('/auth/login', {\n            method: 'POST',\n            body: JSON.stringify({\n                username, //\n                password,\n            }),\n        });\n\n        this.tokenStorage.saveToken(data.token);\n        return data;\n    }\n    async signup(username, password, name, email, url) {\n        const data = await this.http.fetch('/auth/signup', {\n            method: 'POST',\n            body: JSON.stringify({\n                username, //\n                password,\n                name,\n                email,\n                url,\n            }),\n        });\n\n        this.tokenStorage.saveToken(data.token);\n        return data;\n    }\n    async me() {\n        const token = this.tokenStorage.getToken();\n\n        return this.http.fetch('/auth/me', {\n            method: 'GET',\n            headers: { Authorization: `Bearer ${token}` },\n        });\n    }\n\n    async logout() {\n        this.tokenStorage.clearToken();\n    }\n}\n"]},"metadata":{},"sourceType":"module"}